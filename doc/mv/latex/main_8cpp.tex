\hypertarget{main_8cpp}{\section{\-M\-V/main.cpp \-File \-Reference}
\label{main_8cpp}\index{\-M\-V/main.\-cpp@{\-M\-V/main.\-cpp}}
}
{\ttfamily \#include $<$string$>$}\*
{\ttfamily \#include $<$\-G\-L/glew.\-h$>$}\*
{\ttfamily \#include $<$\-G\-L/freeglut.\-h$>$}\*
{\ttfamily \#include $<$\-V\-S/vs\-G\-L\-Info\-Lib.\-h$>$}\*
{\ttfamily \#include $<$\-V\-S/vs\-Math\-Lib.\-h$>$}\*
{\ttfamily \#include $<$\-V\-S/vs\-Res\-Model\-Lib.\-h$>$}\*
{\ttfamily \#include $<$\-V\-S/vs\-Shader\-Lib.\-h$>$}\*
{\ttfamily \#include \char`\"{}blaf.\-h\char`\"{}}\*
{\ttfamily \#include \char`\"{}ar.\-h\char`\"{}}\*
\subsection*{\-Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{main_8cpp_a33e20b37682a0492a9e95d13bef17f02}{change\-Size} (int w, int h)
\begin{DoxyCompactList}\small\item\em \-Set the camera's perspective to fit the new window size. \end{DoxyCompactList}\item 
void \hyperlink{main_8cpp_a2a96aed746d13d9b42d7888e156045f6}{render\-Scene} (void)
\begin{DoxyCompactList}\small\item\em \-Draws the scene in the 3-\/\-D virtual world. \end{DoxyCompactList}\item 
void \hyperlink{main_8cpp_a2b379aae5ee843bdd70395da24980367}{time\-Elapsed} (int value)
\begin{DoxyCompactList}\small\item\em \-Timer event to refresh the screen. \end{DoxyCompactList}\item 
void \hyperlink{main_8cpp_a882b2eef973c4038f20d8f4c99909754}{init\-Cube\-Side\-Shader} (unsigned color)
\begin{DoxyCompactList}\small\item\em \-Initialize one of the shaders for the teapots to be placed in the scene. \end{DoxyCompactList}\item 
void \hyperlink{main_8cpp_aee951e1575b8606d4b73fe8ad464adf3}{init\-Cube\-Shaders} ()
\begin{DoxyCompactList}\small\item\em \-Initialize all the shaders for the teapots to be placed in the scene. \end{DoxyCompactList}\item 
void \hyperlink{main_8cpp_ad505b7bf7748f8ef6089b4f9d5c516b1}{init} ()
\begin{DoxyCompactList}\small\item\em \-Define the \-Open\-G\-L options, load the models to be used and set initial values for global variables. \end{DoxyCompactList}\item 
void \hyperlink{main_8cpp_a3fad4f247cd06a520ea035e21f7cecb2}{init\-V\-S\-L} ()
\begin{DoxyCompactList}\small\item\em \-Initialize the \-Very \-Simple \-Math \-Library. \end{DoxyCompactList}\item 
int \hyperlink{main_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}{main} (int argc, char $\ast$$\ast$argv)
\begin{DoxyCompactList}\small\item\em \-Initialize the environment, set windows and callbacks and call the application main loop. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{\-Variables}
\begin{DoxyCompactItemize}
\item 
\-V\-S\-Math\-Lib $\ast$ \hyperlink{main_8cpp_a6614b7040f9b45cfc10b66b74eb6deeb}{vsml}
\begin{DoxyCompactList}\small\item\em \-Very \-Simple \-Math \-Library instance, used for drawing the scene. \end{DoxyCompactList}\item 
\hyperlink{class_v_s_shader_lib}{\-V\-S\-Shader\-Lib} \hyperlink{main_8cpp_aa1d03b5feb3634a31b170539ecd834a4}{shaders} \mbox{[}8\mbox{]}
\item 
\hyperlink{class_v_s_res_model_lib}{\-V\-S\-Res\-Model\-Lib} \hyperlink{main_8cpp_af2a77067e59758e48e8a3a19f632fc25}{teapot}
\begin{DoxyCompactList}\small\item\em \-Model used to draw the teapots. \end{DoxyCompactList}\item 
float \hyperlink{main_8cpp_a85828840d857f1657e2047314e99be87}{cam\-Direction} \mbox{[}4\mbox{]} = \{ 0.\-0f , 0.\-0f , -\/1.\-0f , 0.\-0f \}
\begin{DoxyCompactList}\small\item\em \-Default camera looking direction. \end{DoxyCompactList}\item 
float \hyperlink{main_8cpp_aee7462a2741f4aa39e3ec1e49098c0f4}{cam\-Position} \mbox{[}4\mbox{]} = \{ 0.\-0f , 0.\-0f , 0.\-0f , 1.\-0f \}
\begin{DoxyCompactList}\small\item\em \-Camera position, set by default to the world coordinate system origin. \end{DoxyCompactList}\item 
float \hyperlink{main_8cpp_ac930ffe3beb3cb4229a4bd7eac77047c}{cam\-Up} \mbox{[}4\mbox{]} = \{ 0.\-0f , 1.\-0f , 0.\-0f , 0.\-0f \}
\begin{DoxyCompactList}\small\item\em \-Default camera up vector (defines the vertical orientation of the camera). \end{DoxyCompactList}\item 
float \hyperlink{main_8cpp_a30d778c0b090e943a6f61a7aceb88827}{cam\-Zoom} = 5.\-0f
\begin{DoxyCompactList}\small\item\em \-Distance units between the camera and the target. \end{DoxyCompactList}\item 
float \hyperlink{main_8cpp_a629aea9fa74244b9dc8f2ae5e420c291}{gl\-Transformation\-Matrix} \mbox{[}16\mbox{]}
\end{DoxyCompactItemize}


\subsection{\-Function \-Documentation}
\hypertarget{main_8cpp_a33e20b37682a0492a9e95d13bef17f02}{\index{main.\-cpp@{main.\-cpp}!change\-Size@{change\-Size}}
\index{change\-Size@{change\-Size}!main.cpp@{main.\-cpp}}
\subsubsection[{change\-Size}]{\setlength{\rightskip}{0pt plus 5cm}void {\bf change\-Size} (
\begin{DoxyParamCaption}
\item[{int}]{w, }
\item[{int}]{h}
\end{DoxyParamCaption}
)}}\label{main_8cpp_a33e20b37682a0492a9e95d13bef17f02}


\-Set the camera's perspective to fit the new window size. 

\-Changes the viewport to fit the entire window and changes the camera's perspective according to the new ratio of the horizontal and vertical dimensions.

\-Uses the \-Very \-Simple \-Math \-Library retrieved in the initialization.


\begin{DoxyParams}{\-Parameters}
{\em w} & \-The new width of the window. \\
\hline
{\em h} & \-The new height of the window. \\
\hline
\end{DoxyParams}
\hypertarget{main_8cpp_ad505b7bf7748f8ef6089b4f9d5c516b1}{\index{main.\-cpp@{main.\-cpp}!init@{init}}
\index{init@{init}!main.cpp@{main.\-cpp}}
\subsubsection[{init}]{\setlength{\rightskip}{0pt plus 5cm}void {\bf \-V\-S\-Shader\-Lib\-::init} (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{main_8cpp_ad505b7bf7748f8ef6089b4f9d5c516b1}


\-Define the \-Open\-G\-L options, load the models to be used and set initial values for global variables. 

\-Loads the model for the teapots to be placed in the scene, aborting the program in case of failure.

\-Also, sets the transformation matrix to the identity.

\-Enables the depth test, multisampling and defines the background color to 50\% gray. \hypertarget{main_8cpp_aee951e1575b8606d4b73fe8ad464adf3}{\index{main.\-cpp@{main.\-cpp}!init\-Cube\-Shaders@{init\-Cube\-Shaders}}
\index{init\-Cube\-Shaders@{init\-Cube\-Shaders}!main.cpp@{main.\-cpp}}
\subsubsection[{init\-Cube\-Shaders}]{\setlength{\rightskip}{0pt plus 5cm}void {\bf init\-Cube\-Shaders} (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{main_8cpp_aee951e1575b8606d4b73fe8ad464adf3}


\-Initialize all the shaders for the teapots to be placed in the scene. 

\-Calls the initializer function for every shader instance to be used with the teapots.

\begin{DoxySeeAlso}{\-See also}
\hyperlink{main_8cpp_a882b2eef973c4038f20d8f4c99909754}{init\-Cube\-Side\-Shader} 
\end{DoxySeeAlso}
\hypertarget{main_8cpp_a882b2eef973c4038f20d8f4c99909754}{\index{main.\-cpp@{main.\-cpp}!init\-Cube\-Side\-Shader@{init\-Cube\-Side\-Shader}}
\index{init\-Cube\-Side\-Shader@{init\-Cube\-Side\-Shader}!main.cpp@{main.\-cpp}}
\subsubsection[{init\-Cube\-Side\-Shader}]{\setlength{\rightskip}{0pt plus 5cm}void {\bf init\-Cube\-Side\-Shader} (
\begin{DoxyParamCaption}
\item[{unsigned}]{color}
\end{DoxyParamCaption}
)}}\label{main_8cpp_a882b2eef973c4038f20d8f4c99909754}


\-Initialize one of the shaders for the teapots to be placed in the scene. 

\-Every shader initialized with this function implements only a lighting model using \-Phong's algorithm with a point of light, changing only the diffuse component.

\-A total of eight different shaders may be initialized here, including the three primary colors \-R\-G\-B, the three secondary colors \-Y\-C\-M, black and white.


\begin{DoxyParams}{\-Parameters}
{\em color} & \-Defines the color to be defined. \-Also represents the index of the shader instance to be initialized. \-This value is truncated at the maximum allowed, if greater.\\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{\-See also}
\hyperlink{main_8cpp_aee951e1575b8606d4b73fe8ad464adf3}{init\-Cube\-Shaders()} 
\end{DoxySeeAlso}
\hypertarget{main_8cpp_a3fad4f247cd06a520ea035e21f7cecb2}{\index{main.\-cpp@{main.\-cpp}!init\-V\-S\-L@{init\-V\-S\-L}}
\index{init\-V\-S\-L@{init\-V\-S\-L}!main.cpp@{main.\-cpp}}
\subsubsection[{init\-V\-S\-L}]{\setlength{\rightskip}{0pt plus 5cm}void {\bf init\-V\-S\-L} (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{main_8cpp_a3fad4f247cd06a520ea035e21f7cecb2}


\-Initialize the \-Very \-Simple \-Math \-Library. 

\-Retrieve the \-V\-S\-M\-L instance and set the uniform names for the matrices\-:
\begin{DoxyItemize}
\item \-Project-\/\-View-\/\-Model
\item \-Normal
\item \-View-\/\-Model
\item \-View
\end{DoxyItemize}

\-These matrices are required by the \-Phong lighting shaders, used to draw the teapots. \hypertarget{main_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}{\index{main.\-cpp@{main.\-cpp}!main@{main}}
\index{main@{main}!main.cpp@{main.\-cpp}}
\subsubsection[{main}]{\setlength{\rightskip}{0pt plus 5cm}int {\bf main} (
\begin{DoxyParamCaption}
\item[{int}]{argc, }
\item[{char $\ast$$\ast$}]{argv}
\end{DoxyParamCaption}
)}}\label{main_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}


\-Initialize the environment, set windows and callbacks and call the application main loop. 

\-Initializes the \-G\-L\-U\-T library and context.

\-Creates and sets the callbacks for the virtual world window (\-Teapot \-World).

\-Also initializes the \-G\-L\-E\-W library (required to load the models), and calls \hyperlink{main_8cpp_ad505b7bf7748f8ef6089b4f9d5c516b1}{init()}, \hyperlink{main_8cpp_a3fad4f247cd06a520ea035e21f7cecb2}{init\-V\-S\-L()} and \hyperlink{main_8cpp_aee951e1575b8606d4b73fe8ad464adf3}{init\-Cube\-Shaders()}.

\-Initializes the \-A\-R\-Tool\-Kit library. \-The \-A\-R\-Tool\-Kit library is also responsible for calling the application main loop.

\begin{DoxySeeAlso}{\-See also}
\hyperlink{main_8cpp_ad505b7bf7748f8ef6089b4f9d5c516b1}{init()}, \hyperlink{main_8cpp_a3fad4f247cd06a520ea035e21f7cecb2}{init\-V\-S\-L()}, \hyperlink{main_8cpp_aee951e1575b8606d4b73fe8ad464adf3}{init\-Cube\-Shaders()}, \hyperlink{namespacecg_1_1pi_1_1ar_a1fca5521342384d779b14b37af9dd953}{cg\-::pi\-::ar\-::init()}, \hyperlink{namespacecg_1_1pi_1_1ar_a8a0f3d10242ff8f4491b1b376ea8bf09}{cg\-::pi\-::ar\-::run()} 
\end{DoxySeeAlso}
\hypertarget{main_8cpp_a2a96aed746d13d9b42d7888e156045f6}{\index{main.\-cpp@{main.\-cpp}!render\-Scene@{render\-Scene}}
\index{render\-Scene@{render\-Scene}!main.cpp@{main.\-cpp}}
\subsubsection[{render\-Scene}]{\setlength{\rightskip}{0pt plus 5cm}void {\bf render\-Scene} (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{main_8cpp_a2a96aed746d13d9b42d7888e156045f6}


\-Draws the scene in the 3-\/\-D virtual world. 

\-Retrieves the transformation matrix set by the \-A\-R\-Tool\-Kit library and computes the camera's new direction, up vector and target accordingly, using the look\-At function to correctly set the perspective.

\-Also draws the teapots in a cube shape around the origin of the world coordinate system, changing the shader used to set the teapot's color according to its position in the cube.

\begin{DoxySeeAlso}{\-See also}
\hyperlink{namespacecg_1_1pi_1_1ar_a231a9527f1d785d52b483821b8e4afd9}{cg\-::pi\-::ar\-::lock\-Output()}, \hyperlink{namespacecg_1_1pi_1_1ar_a975cc0ca7a96016024e8cebb34550de4}{cg\-::pi\-::ar\-::unlock\-Output()} 
\end{DoxySeeAlso}
\hypertarget{main_8cpp_a2b379aae5ee843bdd70395da24980367}{\index{main.\-cpp@{main.\-cpp}!time\-Elapsed@{time\-Elapsed}}
\index{time\-Elapsed@{time\-Elapsed}!main.cpp@{main.\-cpp}}
\subsubsection[{time\-Elapsed}]{\setlength{\rightskip}{0pt plus 5cm}void {\bf time\-Elapsed} (
\begin{DoxyParamCaption}
\item[{int}]{value}
\end{DoxyParamCaption}
)}}\label{main_8cpp_a2b379aae5ee843bdd70395da24980367}


\-Timer event to refresh the screen. 

\-Refreshes the screen every 33 miliseconds to keep a frame rate close to 30 frames per second.

/param value \-The identifier of the timer which called the event. \-Ignored in this case, as only one timer is created in the whole application. 

\subsection{\-Variable \-Documentation}
\hypertarget{main_8cpp_a85828840d857f1657e2047314e99be87}{\index{main.\-cpp@{main.\-cpp}!cam\-Direction@{cam\-Direction}}
\index{cam\-Direction@{cam\-Direction}!main.cpp@{main.\-cpp}}
\subsubsection[{cam\-Direction}]{\setlength{\rightskip}{0pt plus 5cm}float {\bf cam\-Direction}\mbox{[}4\mbox{]} = \{ 0.\-0f , 0.\-0f , -\/1.\-0f , 0.\-0f \}}}\label{main_8cpp_a85828840d857f1657e2047314e99be87}


\-Default camera looking direction. 

\hypertarget{main_8cpp_aee7462a2741f4aa39e3ec1e49098c0f4}{\index{main.\-cpp@{main.\-cpp}!cam\-Position@{cam\-Position}}
\index{cam\-Position@{cam\-Position}!main.cpp@{main.\-cpp}}
\subsubsection[{cam\-Position}]{\setlength{\rightskip}{0pt plus 5cm}float {\bf cam\-Position}\mbox{[}4\mbox{]} = \{ 0.\-0f , 0.\-0f , 0.\-0f , 1.\-0f \}}}\label{main_8cpp_aee7462a2741f4aa39e3ec1e49098c0f4}


\-Camera position, set by default to the world coordinate system origin. 

\hypertarget{main_8cpp_ac930ffe3beb3cb4229a4bd7eac77047c}{\index{main.\-cpp@{main.\-cpp}!cam\-Up@{cam\-Up}}
\index{cam\-Up@{cam\-Up}!main.cpp@{main.\-cpp}}
\subsubsection[{cam\-Up}]{\setlength{\rightskip}{0pt plus 5cm}float {\bf cam\-Up}\mbox{[}4\mbox{]} = \{ 0.\-0f , 1.\-0f , 0.\-0f , 0.\-0f \}}}\label{main_8cpp_ac930ffe3beb3cb4229a4bd7eac77047c}


\-Default camera up vector (defines the vertical orientation of the camera). 

\hypertarget{main_8cpp_a30d778c0b090e943a6f61a7aceb88827}{\index{main.\-cpp@{main.\-cpp}!cam\-Zoom@{cam\-Zoom}}
\index{cam\-Zoom@{cam\-Zoom}!main.cpp@{main.\-cpp}}
\subsubsection[{cam\-Zoom}]{\setlength{\rightskip}{0pt plus 5cm}float {\bf cam\-Zoom} = 5.\-0f}}\label{main_8cpp_a30d778c0b090e943a6f61a7aceb88827}


\-Distance units between the camera and the target. 

\hypertarget{main_8cpp_a629aea9fa74244b9dc8f2ae5e420c291}{\index{main.\-cpp@{main.\-cpp}!gl\-Transformation\-Matrix@{gl\-Transformation\-Matrix}}
\index{gl\-Transformation\-Matrix@{gl\-Transformation\-Matrix}!main.cpp@{main.\-cpp}}
\subsubsection[{gl\-Transformation\-Matrix}]{\setlength{\rightskip}{0pt plus 5cm}float {\bf gl\-Transformation\-Matrix}\mbox{[}16\mbox{]}}}\label{main_8cpp_a629aea9fa74244b9dc8f2ae5e420c291}
\-Transformation matrix shared between the capture system and the virtual world. \-The values in this matrix are set according to the ones retrieved from the \-A\-R\-Tool\-Kit library, ignoring any translation data. \-Due to its shared nature, this matrix is controlled by a mutex primitive to avoid race conditions. \-Accesses must follow a call to \hyperlink{namespacecg_1_1pi_1_1ar_a231a9527f1d785d52b483821b8e4afd9}{cg\-::pi\-::ar\-::lock\-Output()} and be followed by a call to \hyperlink{namespacecg_1_1pi_1_1ar_a975cc0ca7a96016024e8cebb34550de4}{cg\-::pi\-::ar\-::unlock\-Output()} \begin{DoxySeeAlso}{\-See also}
\hyperlink{namespacecg_1_1pi_1_1ar_a231a9527f1d785d52b483821b8e4afd9}{cg\-::pi\-::ar\-::lock\-Output()}, \hyperlink{namespacecg_1_1pi_1_1ar_a975cc0ca7a96016024e8cebb34550de4}{cg\-::pi\-::ar\-::unlock\-Output()} 
\end{DoxySeeAlso}
\hypertarget{main_8cpp_aa1d03b5feb3634a31b170539ecd834a4}{\index{main.\-cpp@{main.\-cpp}!shaders@{shaders}}
\index{shaders@{shaders}!main.cpp@{main.\-cpp}}
\subsubsection[{shaders}]{\setlength{\rightskip}{0pt plus 5cm}{\bf \-V\-S\-Shader\-Lib} {\bf shaders}\mbox{[}8\mbox{]}}}\label{main_8cpp_aa1d03b5feb3634a31b170539ecd834a4}
\-Collection of shaders to draw the teapots in the different positions of the cube. 0 \-: black 1 \-: blue 2 \-: green 3 \-: cyan 4 \-: red 5 \-: magenta 6 \-: yellow 7 \-: white \hypertarget{main_8cpp_af2a77067e59758e48e8a3a19f632fc25}{\index{main.\-cpp@{main.\-cpp}!teapot@{teapot}}
\index{teapot@{teapot}!main.cpp@{main.\-cpp}}
\subsubsection[{teapot}]{\setlength{\rightskip}{0pt plus 5cm}{\bf \-V\-S\-Res\-Model\-Lib} {\bf teapot}}}\label{main_8cpp_af2a77067e59758e48e8a3a19f632fc25}


\-Model used to draw the teapots. 

\hypertarget{main_8cpp_a6614b7040f9b45cfc10b66b74eb6deeb}{\index{main.\-cpp@{main.\-cpp}!vsml@{vsml}}
\index{vsml@{vsml}!main.cpp@{main.\-cpp}}
\subsubsection[{vsml}]{\setlength{\rightskip}{0pt plus 5cm}\-V\-S\-Math\-Lib$\ast$ {\bf vsml}}}\label{main_8cpp_a6614b7040f9b45cfc10b66b74eb6deeb}


\-Very \-Simple \-Math \-Library instance, used for drawing the scene. 

